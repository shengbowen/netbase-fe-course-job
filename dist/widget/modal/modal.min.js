var emitter={on:function(i,t){var n=this._handles||(this._handles={}),e=n[i]||(n[i]=[]);return e.push(t),this},off:function(i,t){if(i&&this._handles||(this._handles={}),this._handles){var n,e=this._handles;if(n=e[i]){if(!t)return e[i]=[],this;for(var o=0,s=n.length;o<s;o++)if(t===n[o])return n.splice(o,1),this}return this}},emit:function(i){var t,n=[].slice.call(arguments,1),e=this._handles;if(!e||!(t=e[i]))return this;for(var o=0,s=t.length;o<s;o++)t[o].apply(this,n);return this}};!function(){function i(i){var t=document.createElement("div");return t.innerHTML=i,t.children[0]}function t(i,t){for(var n in t)"undefined"==typeof i[n]&&(i[n]=t[n]);return i}function n(i){i=i||{},this.container=this._layout.cloneNode(!0),this.body=this.container.querySelector(".modal_body"),this.wrap=this.container.querySelector(".modal_wrap"),t(this,i),this._initEvent()}var e='<div class="m-modal">    <div class="modal_align"></div>    <div class="modal_wrap animated">      <div class="close">&times;</div>      <div class="modal_body"></div>    </div>  </div>';t(n.prototype,{_layout:i(e),setContent:function(i){if(i){for(;this.body.lastChild;)this.body.removeChild(this.body.lastChild);1===i.nodeType?(this.body.innerHTML="",this.body.appendChild(i)):this.body.innerHTML=i}},show:function(i){i&&this.setContent(i),document.body.appendChild(this.container),animateClass(this.wrap,this.animation.enter)},hide:function(){var i=this.container;animateClass(this.wrap,this.animation.leave,function(){document.body.removeChild(i)})},_initEvent:function(){util.addEvent(this.container.querySelector(".close"),"click",this.hide.bind(this))},_onConfirm:function(){this.emit("confirm"),this.hide()},_onCancel:function(){this.emit("cancel"),this.hide()}}),t(n.prototype,emitter),"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):window.Modal=n}();