!function(e){function t(t){t.forEach(function(t){e.delClass(t,"z-selected")})}var n=function(e){return document.getElementById(e)};!function(){var t=n("watch"),a=n("unwatch"),o=n("tips");cookies=e.getCookie(),void 0===cookies.noMention&&(o.style.display="block"),void 0!==cookies.followSuc&&(t.style.display="none",a.style.display="inline-block")}();var a=n("noMention"),o=n("tips");a.onclick=function(){o.style.display="none",e.setCookie("noMention","true")};var i=new Modal({animation:{enter:"bounceIn",leave:"bounceOut"}}),s=document.forms.loginForm,l=s.uname,c=s.upwd,r=s.login,d=n("mlogin"),u=n("fans");r.onclick=function(){""===l.value.trim()&&alert("用户名为空！"),""===l.value.trim()&&alert("密码为空！");var t=md5(l.value.trim()),n=md5(c.value.trim());e.get("http://study.163.com/webDev/login.htm",{userName:t,password:n},function(t){if(!t)return void alert("用户名或密码错误！");var n=new Date;n=+n+6048e5,n=new Date(n),e.setCookie("loginSuc","true",n),alert("登陆成功！"),p.click(),i.hide()})};var p=n("watch"),m=n("unwatch");e.addEvent(p,"click",function(t){var n=e.getCookie().loginSuc;void 0===n?i.show(d):e.get("http://study.163.com/webDev/attention.htm",{},function(t){if(!t)return void alert("关注失败！");p.style.display="none",m.style.display="inline-block";var n=new Date;n=+n+6048e5,n=new Date(n),e.setCookie("followSuc","true",n),u.innerHTML="46"})}),e.addEvent(m,"click",function(){p.style.display="inline-block",m.style.display="none",e.removeCookie("followSuc"),u.innerHTML="45"});var v=n("videoBtn");e.addEvent(v,"click",function(){var t='<p style="margin-bottom:10px; color:black">观看下面的视频了解吧：</p><video src="'+e.getDataSet(v).link+'" width="890" height="500" controls="" autoplay></video>';i.show(t)});var f=new Slider({container:n("gslide"),images:["dist/img/banner1.jpg","dist/img/banner2.jpg","dist/img/banner3.jpg"],links:["http://open.163.com/","http://study.163.com/","http://www.icourse163.org/"],animateTime:500,interval:5e3}),h=function(t){return e.slice(document.querySelectorAll(t))},y=h(".cursor"),g=h(".g-slide")[0],k=h(".u-larrow")[0],w=h(".u-rarrow")[0];y.forEach(function(t,n){e.addEvent(t,"click",function(){t.className.indexOf("z-active")===-1&&f.nav(n)})}),e.addEvent(g,"mouseover",function(){f.stop()}),e.addEvent(g,"mouseout",function(){f.autoPlay()}),e.addEvent(k,"click",function(){f.prev()}),e.addEvent(w,"click",function(){f.next()}),f.on("nav",function(e){y.forEach(function(t,n){e.pageIndex===n?t.className="z-active":t.className=""})}),f.nav(0),f.autoPlay();var $=new Paginator({container:n("pwapper"),pageSize:20,currentPage:1}),b='<section class="course" data-id="{ $id }" data-middle-photo-url="{ $middlePhotoUrl }"                            data-name="{ $name }" data-provider="{ $provider }" data-learner-count="{ $learnerCount }"                            data-category-name="{ $categoryName  }" data-description="{ $description }" >                        <div class="course_link">                            <div class="img f-oh">                            <a href="http://study.163.com/course/introduction/{ $id }.htm" target="_blank" title="{ $name }"><img class="pic" src="{ $middlePhotoUrl  }" alt=" { $name } "></a>                            </div>                            <h3><a href="http://study.163.com/course/introduction/{ $id }.htm" target="_blank" title="{ $name }" class="f-elipsis title">{ $name }</a></h3>                        </div>                        <div class="course_info">                            <p><a>{ $provider }</a></p>                            <div class="like">                                <span class="user_icon"></span>                                <span class="like_sum">{ $learnerCount } </span>                            </div>                            <div class="price">&yen; { $price }</div>                        </div>                  </section>',E='<div class="card f-cb">                <a class="f-fl" href="http://study.163.com/course/introduction/{ $id }.htm" target="_blank" title="{ $name }"><img src="{ $middlePhotoUrl }" alt="" width="224" height="124"></a>                <div class="intro f-oh">                    <h2><a class="title" href="http://study.163.com/course/introduction/{ $id }.htm" title="{ $name }" target="_blank">{ $name }</a></h2>                    <p class="learn">                        <span class="user_icon"></span>                        <span class="like_sum">{ $learnerCount }</span>在学                    </p>                    <p class="provider">发布者：<span>{ $provider }</span></p>                    <p>分类：<span>{ $categoryName }</span></p>                </div>            </div>            <div class="descript">                <p>{ $description }</p>            </div>',S=n("courseinfo").getElementsByTagName("article")[0],C=n("detail"),T=null,_=function(t,n,a,o,i,s){e.get("http://study.163.com/webDev/couresByCategory.htm",{pageNo:n.currentPage,psize:n.pageSize,type:t},function(t){for(var n=JSON.parse(t).list,l="",c=0,r=n.length;c<r;c++)l+=e.renderTemplate(i,n[c]);a.innerHTML=l;var d=a.querySelectorAll(".course");d=e.slice(d);var u=function(t){clearTimeout(T),T=setTimeout(function(){o.innerHTML=e.renderTemplate(s,e.getDataSet(t)),o.style.left=t.offsetLeft+"px",o.style.top=t.offsetTop+"px",o.style.display="block"},500)};d.forEach(function(t){e.addEvent(t,"mouseenter",function(e){u(t)}),e.addEvent(t,"mousemove",function(e){u(t)}),e.addEvent(t,"mouseleave",function(){clearTimeout(T)}),e.addEvent(o,"mouseleave",function(e){o.style.display="none"})})})},D=function(t,n,a,o,i,s){e.get("http://study.163.com/webDev/couresByCategory.htm",{pageNo:1,psize:n.pageSize,type:t},function(e){var l=JSON.parse(e);n.totalPages=l.totalPage,n.onPageClicked=function(){_(t,n,a,o,i,s)},n.show(1)})},N=n("tabs"),P=e.slice(N.querySelectorAll(".tab"));P.forEach(function(n){e.addEvent(n,"click",function(a){t(P),e.addClass(n,"z-selected");var o=parseInt(e.getDataSet(n).type);D(o,$,S,C,b,E)})}),P[0].click();var I='<li class="list_item f-cb">              <a href="http://study.163.com/course/introduction/{ $id }.htm" target="_blank" title="{ $name }" class="f-fl"><img src="{ $smallPhotoUrl  }" alt="" width="50" height="50"></a>             <div class="item_info f-oh">                 <a href="http://study.163.com/course/introduction/{ $id }.htm " target="_blank" title={ $name }><h3 class="f-elipsis">{ $name }</h3></a>                 <div class="like">                     <span class="user_icon"></span>                     <span class="like_sum">{ $learnerCount }</span>                 </div>             </div>         </li>',x="",z=(n("hotscroll"),n("hotlist")),M=null;e.get("http://study.163.com/webDev/hotcouresByCategory.htm",{},function(t){function n(e){if(0!==e){z.style.top=z.style.top||0;var t=300,n=10,a=e/(t/n),o=parseInt(z.style.top)+e,i=function(){a<0&&parseInt(z.style.top)>o?(z.style.top=parseInt(z.style.top)+a+"px",M=setTimeout(i,n)):(clearTimeout(M),z.style.top=o+"px",o<-1387&&(z.style.top="0px"))};i()}}for(var a=JSON.parse(t),o=0,i=a.length;o<i;o++)x+=e.renderTemplate(I,a[o]);x+=x,z.innerHTML=x;var s=setInterval(function(){n(-73)},5e3);浏览器tab页获得焦点时重新执行动画,e.addEvent(window,"focus",function(){clearInterval(s),s=setInterval(function(){n(-73)},5e3)}),e.addEvent(window,"blur",function(){clearInterval(s)})})}(util);