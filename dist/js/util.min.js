var util=function(){return Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<i;){var a;r in o&&(a=o[r],e.call(n,a,r,o)),r++}}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}),{extend:function(e,t){for(var n in t)void 0==e[n]&&(e[n]=t[n])},addClass:function(e,t){var n=e.className||"";(" "+n+" ").indexOf(" "+t+" ")===-1&&(e.className=n?n+" "+t:t)},delClass:function(e,t){var n=e.className||"";e.className=(" "+n+" ").replace(" "+t+" "," ").trim()},emitter:{on:function(e,t){var n=this._handles||(this._handles={}),r=n[e]||(n[e]=[]);return r.push(t),this},off:function(e,t){if(e&&this._handles||(this._handles={}),this._handles){var n,r=this._handles;if((n=r[e])&&!t)return r[e]=[],this;for(var o=0,i=n.length;o<i;o++)if(t===n[o])return n.splice(o,1),this;return this}},emit:function(e){var t,n=[].slice.call(arguments,1),r=this._handles;if(!r||!(t=r[e]))return this;for(var o=0,i=t.length;o<i;o++)t[o].apply(this,n);return this}},serialize:function(e){if(!e)return"";var t=[];for(var n in e)if(e.hasOwnProperty(n)&&"function"!=typeof e[n]){var r=e[n].toString();n=encodeURIComponent(n),r=encodeURIComponent(r),t.push(n+"="+r)}return t.join("&")},createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},get:function(e,t,n){var r=this.createCORSRequest("GET",e+"?"+this.serialize(t));if(!r)throw new Error("not support CORS!");r.onload=function(){n(r.responseText)},r.onerror=function(){console.log(" ajax has some error!")},r.send(null)},post:function(e,t,n){var r=this.createCORSRequest("POST",e);r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(this.serialize(t))},slice:function(e){var t=null;try{t=Array.prototype.slice.call(e,0)}catch(n){t=new Array;for(var r=0;r<e.length;r++)t.push(e[r])}return t},renderTemplate:function(e,t){if(t)return e.replace(/\{\s+\$([^\s]+)\s+\}/g,function(e,n){return void 0!==t[n]?t[n]:""})},setCookie:function(e,t,n,r,o,i){var a=encodeURIComponent(e)+"="+encodeURIComponent(t);n&&(a+="; expires="+n.toGMTString()),r&&(a+="; path="+r),o&&(a+="; domain="+o),i&&(a+="; secure="+i),document.cookie=a},getCookie:function(){var e={},t=document.cookie;if(""===t)return e;for(var n=t.split("; "),r=0;r<n.length;r++){var o=n[r],i=o.indexOf("="),a=o.substring(0,i);a=decodeURIComponent(a);var s=o.substring(i+1);s=decodeURIComponent(s),e[a]=s}return e},removeCookie:function(e){document.cookie=e+"=; max-age=0"},addEvent:function(e,t,n,r){document.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)},removeEvent:function(e,t,n,r){document.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)},getTarget:function(e){var t=e||window.event;return t.target||t.srcElement},transformCambel:function(e){for(var t=e.split("-"),n=t[0]?t[0].toLowerCase():"",r=1;r<t.length;r++)n+=t[r].replace(/(\w)(\w*)/,function(e,t,n){return t.toUpperCase()+n.toLowerCase()});return n},getDataSet:function(e){if(e.dataset)return e.dataset;for(var t={},n=e.attributes,r=0;r<n.length;r++)/^data-.*/.test(n[r].name)&&(name=this.transformCambel(n[r].name.substr(5)),t[name]=n[r].value);return t}}}();